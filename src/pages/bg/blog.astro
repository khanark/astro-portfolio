---
import layout, { style } from "../../constants/style";
import avatarPhoto from "../../assets/Bobby.jpg";
import Typography from "../../components/react/Typography";

import { getLangFromUrl, useTranslations } from "../../i18n/utils";
import BlogLayout from "../../layouts/BlogLayout.astro";
import BlogCard from "../../components/astro/BlogCard.astro";
import { Image } from "astro:assets";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const posts = await Astro.glob("../blog/*.md");
// sort the post by date usign the frontmatter
const sortedPosts = posts.sort((a, b) => {
    return b.frontmatter.date.localeCompare(a.frontmatter.date);
});
---

<BlogLayout title="Lavacoder | Blog">
    <div class="bg-red-100 text-center py-2">
        <h2 class="text-orange-700 text-lg">This side of the moon is still dark!</h2>
        <p class="text-orange-500 text-sm underline">The blog page is under construction</p>
    </div>
    <section class=`${layout.section.dark}`>
        <div
            class=`${layout.maxWidth} flex flex-col md:flex-row justify-center items-center gap-4 md:gap-8`
        >
            <div
                class="w-2/3 md:w-1/4 h-auto overflow-hidden rounded-full border-[4px] border-gray-400 dark:border-gray-200/40"
            >
                <img
                    src={avatarPhoto.src}
                    class="object-cover w-full h-full grayscale"
                    alt="Borislav"
                />
            </div>
            <div class="w-full text-center md:text-left md:w-1/2">
                <Typography variant="h2" className="!mb-0">{t("blog.author")}</Typography>
                <Typography>Fullstack Javascript Developer</Typography>
                <Typography>
                    {t("blog.aboutAuthor")}
                </Typography>
                <a
                    href="https://www.linkedin.com/in/borislav-godumov-7245b61a2/"
                    target="_blank"
                    class="flex items-center hover:gap-8 transition-all duration-300 gap-2 text-lg text-cyan-600 underline underline-offset-4"
                >
                    <p>
                        Connect with me on <span class="font-bold">LinkedIn</span>
                    </p>
                    <i class="fa-solid fa-arrow-right text-lg"></i>
                </a>
            </div>
        </div>
    </section>
    <div class=`${layout.section.light}`>
        <div class=`${layout.maxWidthSecondary}`>
            <ul class="grid responsive-grid">
                {
                    sortedPosts.map((post) => {
                        return (
                            <li class=`${layout.section.dark} !p-4 rounded`>
                                <a
                                    href={`/category/${post.frontmatter.category}`}
                                    class="text-cyan-600 text-xs uppercase font-bold border border-cyan-600 rounded-full px-2 py-1 mb-2 inline-block"
                                >
                                    {post.frontmatter.category}
                                </a>
                                <Image
                                    width={400}
                                    height={200}
                                    quality={80}
                                    src={post.frontmatter.image.src}
                                    alt={post.frontmatter.image.alt}
                                    class=""
                                />
                            </li>
                        );
                    })
                }
            </ul>
        </div>
    </div>
</BlogLayout>
